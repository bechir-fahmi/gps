<div class="map-container">
  <p-toast></p-toast>
  <button class="toggle-button" (click)="toggleDeviceList()">☰</button>
  <div class="device-list-container" [class.open]="deviceListOpen">
    <button class="close-button" (click)="toggleDeviceList()">✖</button>
    <app-device-list #deviceList [devices]="devices" (deviceSelected)="onDeviceSelected($event)"></app-device-list>
  </div>
  <google-map #mapElement [mapId]="mapId" [center]="center" [zoom]="zoom" height="100%" width="100%"></google-map>
  <p-confirmDialog></p-confirmDialog>
  <app-replay-controls
    *ngIf="replaying"
    (stop)="stopReplay()"
    (play)="playReplay()"
    (pause)="pauseReplay()"
    (forward)="forwardReplay()"
    (rewind)="rewindReplay()"
    (close)="closeReplay()"
    (seek)="seekReplay($event)"
    [maxPosition]="maxReplayPosition"
    [currentPosition]="currentReplayPosition">
  </app-replay-controls>
  <div id="speedometer-container" *ngIf="replaying || following">
    <ngx-gauge
      [value]="speed"
      [min]="0"
      [max]="200"
      [type]="'arch'"
      [cap]="'butt'"
      [size]="200"
      [thick]="12"
      [label]="'Speed (km/h)'"
      [foregroundColor]="'#FF0000'"
      [backgroundColor]="'#E0E0E0'">
    </ngx-gauge>
    <div>{{ currentDatetime }}</div>
  </div>
  <div *ngIf="loading" class="loading-indicator">
    <p-progressSpinner ariaLabel="loading"></p-progressSpinner>
    <p>Loading...</p>
  </div>
</div>
